/* =========================================
   1. GLOBAL RESET & CẤU HÌNH CƠ BẢN
   ========================================= */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
html, body { width: 100%; height: 100%; overflow: hidden; background-color: #313338; color: #dbdee1; display: flex; justify-content: center; align-items: center; }

/* =========================================
   2. LOGIN / REGISTER (Giữ nguyên)
   ========================================= */
.login-container { background-color: #313338; padding: 32px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); width: 400px; }
.login-box h2 { text-align: center; color: #f2f3f5; margin-bottom: 8px; }
.subtitle { text-align: center; color: #b5bac1; font-size: 14px; margin-bottom: 20px; }
.input-group { margin-bottom: 20px; }
.input-group label { display: block; color: #b5bac1; font-size: 11px; font-weight: bold; margin-bottom: 8px; text-transform: uppercase; }
.input-group input { width: 100%; padding: 10px; height: 40px; background-color: #1e1f22; border: none; border-radius: 3px; color: #dbdee1; }
button { width: 100%; height: 45px; background-color: #5865F2; color: white; border: none; border-radius: 3px; font-weight: bold; cursor: pointer; }
button:hover { background-color: #4752c4; }
.link-text { margin-top: 15px; font-size: 14px; color: #b5bac1; }
.link-text a { color: #00aff4; text-decoration: none; font-weight: 500; }
.link-text a:hover { text-decoration: underline; color: #00b0f4; }
.error-msg { color: #ed4245; font-size: 13px; margin-top: 10px; text-align: center; display: none; }

/* =========================================
   3. LAYOUT CHÍNH
   ========================================= */
.app-layout { display: flex; width: 100vw; height: 100vh; background-color: #313338; align-items: stretch; }

/* SIDEBAR */
.sidebar { width: 72px; background-color: #1e1f22; display: flex; flex-direction: column; align-items: center; padding-top: 12px; flex-shrink: 0; overflow-y: auto; }
.sidebar::-webkit-scrollbar { display: none; }
.sidebar-item { position: relative; width: 72px; height: 48px; margin-bottom: 8px; display: flex; justify-content: center; align-items: center; cursor: pointer; }
.sidebar-icon { width: 48px; height: 48px; background-color: #313338; border-radius: 50%; display: flex; justify-content: center; align-items: center; transition: 0.2s; overflow: hidden; color: #dcddde; font-size: 16px; font-weight: bold; }
.sidebar-icon img { width: 100%; height: 100%; object-fit: cover; }
.sidebar-item:hover .sidebar-icon, .sidebar-item.active .sidebar-icon { border-radius: 16px; background-color: #5865F2; color: white; }
.pill { position: absolute; left: 0; width: 4px; height: 0; background-color: white; border-radius: 0 4px 4px 0; transition: height 0.2s; }
.sidebar-item:hover .pill { height: 20px; }
.sidebar-item.active .pill { height: 40px; }
.separator { width: 32px; height: 2px; background-color: #35363c; margin: 8px 0; border-radius: 1px; flex-shrink: 0; }
.tooltip { position: absolute; left: 80px; background-color: #111214; color: #dcddde; padding: 8px 12px; border-radius: 4px; font-size: 14px; font-weight: bold; white-space: nowrap; opacity: 0; pointer-events: none; transform: scale(0.9); transition: 0.1s; z-index: 1000; box-shadow: 0 5px 10px rgba(0,0,0,0.3); }
.sidebar-item:hover .tooltip { opacity: 1; transform: scale(1); }
.add-server-icon { color: #23a559; background-color: #313338; font-size: 24px; font-weight: 300; }
.sidebar-item:hover .add-server-icon { background-color: #23a559; color: white; }

/* NAVIGATION */
.channels-sidebar { width: 240px; background-color: #2b2d31; display: flex; flex-direction: column; flex-shrink: 0; }
.channel-header { height: 48px; border-bottom: 1px solid #1f2023; padding: 0 16px; display: flex; align-items: center; font-weight: bold; color: #f2f3f5; box-shadow: 0 1px 2px rgba(0,0,0,0.1); cursor: pointer; transition: 0.2s; }
.channel-header:hover { background-color: #35373c; }
.channel-list { flex: 1; padding: 10px 8px; overflow-y: auto; }
.channel-list::-webkit-scrollbar { width: 6px; background-color: #2b2d31; }
.channel-list::-webkit-scrollbar-thumb { background-color: #1a1b1e; border-radius: 3px; }
.channel-item { padding: 6px 8px; margin-bottom: 2px; border-radius: 4px; color: #96989d; cursor: pointer; font-size: 15px; font-weight: 500; display: flex; align-items: center; gap: 8px; }
.channel-item:hover { background-color: #35373c; color: #dbdee1; }
.channel-item.active { background-color: #404249; color: white; }
.category-name { font-size: 12px; font-weight: bold; color: #96989d; padding: 0 18px; margin-bottom: 8px; margin-top: 16px; cursor: default; }

/* DM List */
.search-bar-container { height: 48px; border-bottom: 1px solid #1f2023; padding: 0 10px; display: flex; align-items: center; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
.search-btn { background-color: #1e1f22; color: #949ba4; text-align: left; width: 100%; padding: 6px; border-radius: 4px; font-size: 13px; border: none; cursor: pointer; }
.dm-header-item { padding: 10px; color: #96989d; cursor: pointer; border-radius: 4px; margin: 8px 8px 0 8px; display: flex; align-items: center; gap: 12px; }
.dm-header-item:hover { background-color: #35373c; color: #dbdee1; }
.dm-header-item.active { background-color: #404249; color: #fff; }

/* User Bar */
.user-bar { height: 52px; background-color: #232428; display: flex; align-items: center; justify-content: space-between; padding: 0 8px; font-size: 14px; position: relative; }
.user-wrapper { display: flex; align-items: center; padding: 4px; border-radius: 4px; cursor: pointer; flex: 1; min-width: 0; }
.user-wrapper:hover { background-color: #3f4147; }
.user-avatar { width: 32px; height: 32px; background-color: #5865F2; border-radius: 50%; margin-right: 8px; flex-shrink: 0; position: relative; }
.user-avatar::after { content: ''; position: absolute; bottom: -2px; right: -2px; width: 10px; height: 10px; background-color: #23a559; border: 3px solid #232428; border-radius: 50%; }
.user-info { display: flex; flex-direction: column; line-height: 1.2; overflow: hidden; }
.username { font-weight: bold; color: white; font-size: 13px; }
.usertag { font-size: 11px; color: #b9bbbe; }
.user-actions { display: flex; }
.btn-icon { background: none; border: none; color: #b9bbbe; width: 32px; height: 32px; border-radius: 4px; cursor: pointer; display: flex; justify-content: center; align-items: center; }
.btn-icon:hover { background-color: #3f4147; color: #dcddde; }
.settings-popup { display: none; position: absolute; bottom: 60px; left: 10px; width: 220px; background-color: #111214; padding: 6px 8px; border-radius: 4px; box-shadow: 0 8px 16px rgba(0,0,0,0.24); z-index: 1000; }
.settings-popup.show { display: block; }
.menu-item { padding: 8px; border-radius: 2px; color: #b9bbbe; font-size: 14px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
.menu-item:hover { background-color: #5865F2; color: white; }
.menu-item.logout { color: #f23f42; }
.menu-item.logout:hover { background-color: #f23f42; color: white; }

/* CHAT CONTENT */
.chat-content { flex: 1; background-color: #313338; display: flex; flex-direction: column; min-width: 0; }
.top-bar { height: 48px; border-bottom: 1px solid #26272d; display: flex; align-items: center; padding: 0 16px; font-weight: bold; color: #f2f3f5; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
.chat-area { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 16px; }
.custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
.custom-scrollbar::-webkit-scrollbar-track { background-color: #2b2d31; border-radius: 4px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background-color: #1a1b1e; border-radius: 4px; }
.message { display: flex; align-items: flex-start; }
.msg-user { color: white; font-weight: bold; margin-right: 8px; cursor: pointer; }
.msg-content { color: #dcddde; line-height: 1.4; }
.input-area { padding: 0 16px 24px; margin-top: 10px; flex-shrink: 0; }
.input-wrapper { display: flex; align-items: center; width: 100%; background-color: #383a40; border-radius: 8px; padding: 0 16px; }
.input-wrapper input { width: 100%; padding: 12px 0; background: none; border: none; outline: none; color: #dcddde; font-size: 15px; }
.upload-icon-btn { color: #b9bbbe; font-size: 22px; margin-right: 12px; cursor: pointer; display: flex; align-items: center; transition: color 0.2s; }
.upload-icon-btn:hover { color: #f2f3f5; }

/* FRIEND DASHBOARD */
.friend-header-bar { padding: 0 16px; background-color: #313338; display: flex; align-items: center; height: 48px; border-bottom: 1px solid #1f2023; }
.friend-header-left { display: flex; align-items: center; width: 100%; }
.friend-title-wrapper { display: flex; align-items: center; margin-right: 16px; }
.icon-friend { color: #80848e; margin-right: 8px; }
.title-friend { font-weight: bold; color: white; font-size: 16px; }
.vertical-divider { width: 1px; height: 24px; background-color: #3f4147; margin-right: 16px; }
.friend-tabs { display: flex; align-items: center; gap: 8px; }
.tab-item { background: transparent; border: none; font-family: inherit; padding: 2px 8px; border-radius: 4px; color: #b9bbbe; font-weight: 500; cursor: pointer; font-size: 15px; transition: 0.2s; white-space: nowrap; height: 24px; display: flex; align-items: center; }
.tab-item:hover { background-color: #393c43; color: #dcddde; }
.tab-item.active { background-color: #42464D; color: white; cursor: default; }
.add-friend-btn { background-color: #5865F2; color: white; border: none; padding: 2px 10px; border-radius: 4px; font-size: 13px; font-weight: 500; cursor: pointer; transition: 0.2s; white-space: nowrap; height: 24px; }
.add-friend-btn:hover { background-color: #4752c4; }
.friend-dashboard-body { display: flex; flex: 1; overflow: hidden; }
.friend-list-section { flex: 1; padding: 20px 30px; border-right: 1px solid #3f4147; display: flex; flex-direction: column; }
.friend-search-wrapper { background-color: #1e1f22; border-radius: 4px; padding: 8px 12px; display: flex; align-items: center; margin-bottom: 24px; border: 1px solid transparent; }
.friend-search-wrapper:focus-within { border-color: #00a8fc; }
.friend-search-wrapper input { background: none; border: none; outline: none; color: #dcddde; flex: 1; font-size: 15px; }
.friend-label { font-size: 12px; font-weight: bold; color: #b9bbbe; margin-bottom: 16px; text-transform: uppercase; }
.active-now-section { width: 360px; padding: 20px; background-color: #313338; }
.active-now-title { font-size: 20px; font-weight: bold; color: white; margin-bottom: 20px; }
.empty-active-state { text-align: center; margin-top: 40px; }
.empty-text-bold { color: white; font-weight: bold; margin-bottom: 8px; font-size: 16px; }
.empty-text-desc { color: #b9bbbe; font-size: 14px; }

/* =========================================
   CONTEXT MENU
   ========================================= */
.context-menu { position: fixed; background-color: #111214; width: 190px; padding: 6px 8px; border-radius: 4px; box-shadow: 0 8px 16px rgba(0,0,0,0.24); z-index: 9999; display: none; opacity: 0; transition: opacity 0.1s; }
.context-menu.visible { display: block; opacity: 1; }
.context-menu .menu-item { padding: 8px; border-radius: 2px; color: #b9bbbe; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; }
.context-menu .menu-item:hover { background-color: #5865F2; color: white; }
.menu-separator { height: 1px; background-color: #3f4147; margin: 4px 0; }
.icon-right { font-size: 12px; }

/* =========================================
   MODALS DARK THEME (CHUẨN DISCORD)
   ========================================= */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); z-index: 2000; display: flex; justify-content: center; align-items: center; opacity: 0; visibility: hidden; transition: 0.2s; }
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal-box { background-color: #313338; width: 460px; border-radius: 5px; overflow: hidden; position: relative; box-shadow: 0 0 0 1px rgba(32,34,37,.6), 0 2px 10px 0 rgba(0,0,0,.2); transform: scale(0.9); transition: transform 0.2s; }
.modal-overlay.active .modal-box { transform: scale(1); }
.modal-header { padding: 24px 24px 0 24px; text-align: center; }
#createChannelModal .modal-header, #categoryModal .modal-header, #inviteModal .modal-header { text-align: left; padding-bottom: 20px; }
.modal-header h2 { font-size: 24px; font-weight: 700; color: #dbdee1; margin-bottom: 8px; }
.modal-header p { color: #b5bac1; font-size: 14px; margin: 0; }
.sub-text { font-size: 12px !important; text-transform: uppercase; font-weight: 700; margin-top: 4px; }
.modal-body { padding: 16px 24px; }
.input-group { margin-bottom: 20px; }
.input-group label { display: block; color: #b5bac1; font-size: 12px; font-weight: 700; margin-bottom: 8px; text-transform: uppercase; }
.input-group input[type="text"] { width: 100%; padding: 10px; background-color: #1e1f22; border: none; border-radius: 3px; color: #dbdee1; font-size: 16px; outline: none; }
.input-note { font-size: 12px; color: #949ba4; margin-top: 8px; }
.input-note a { color: #00a8fc; text-decoration: none; }
.modal-footer { background-color: #2b2d31; padding: 16px 24px; display: flex; justify-content: flex-end; align-items: center; gap: 16px; }
.btn-cancel { background: none; border: none; color: #dbdee1; font-weight: 500; font-size: 14px; cursor: pointer; padding: 10px 20px; }
.btn-cancel:hover { text-decoration: underline; }
.btn-primary { background-color: #5865F2; color: white; border: none; border-radius: 3px; padding: 10px 24px; font-size: 14px; font-weight: 500; cursor: pointer; transition: 0.2s; }
.btn-primary:hover { background-color: #4752c4; }
.close-modal-btn { position: absolute; top: 20px; right: 20px; background: none; border: none; color: #b5bac1; font-size: 24px; cursor: pointer; transition: 0.2s; z-index: 10; }
.close-modal-btn:hover { color: #dbdee1; }

/* Radio Button (Text/Voice) */
.channel-type-option { display: flex; align-items: center; background-color: #2b2d31; padding: 12px; margin-bottom: 8px; border-radius: 4px; cursor: pointer; transition: 0.2s; }
.channel-type-option:hover, .channel-type-option:has(input:checked) { background-color: #404249; }
.icon-wrapper { font-size: 24px; color: #b5bac1; margin-right: 12px; width: 24px; text-align: center; }
.text-wrapper { flex: 1; }
.type-title { display: block; font-weight: 600; color: #dbdee1; font-size: 16px; margin-bottom: 2px; }
.type-desc { display: block; font-size: 12px; color: #b5bac1; }
.channel-type-option input { display: none; }
.radio-mark { width: 20px; height: 20px; border: 2px solid #b5bac1; border-radius: 50%; position: relative; }
.channel-type-option input:checked + .radio-mark { border-color: #dbdee1; background-color: #dbdee1; border: 5px solid #2b2d31; }

/* Extras */
.server-icon-upload { width: 80px; height: 80px; border-radius: 50%; border: 2px dashed #b5bac1; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 0 auto 20px auto; color: #b5bac1; font-size: 12px; font-weight: 700; cursor: pointer; }
.search-box-invite { background-color: #1e1f22; border-radius: 4px; padding: 2px 8px; display: flex; align-items: center; border: 1px solid #1e1f22; }
.search-box-invite input { background: none !important; }
.search-box-invite:focus-within { border-color: #00a8fc; }
.copy-link-box { display: flex; align-items: center; background-color: #1e1f22; border-radius: 3px; padding: 4px; margin-top: 8px; border: 1px solid #26272d; }
.copy-link-box input { background: none !important; font-size: 14px; color: #dbdee1; }
.btn-copy { background-color: #5865F2; color: white; border: none; border-radius: 3px; padding: 6px 16px; font-weight: 600; font-size: 14px; cursor: pointer; }
.invite-divider { height: 1px; background-color: #3f4147; margin: 20px 0; }
.input-with-icon { position: relative; background-color: #1e1f22; border-radius: 3px; }
.input-with-icon .input-icon { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #b5bac1; font-size: 14px; }
.input-with-icon input { padding-left: 30px !important; }